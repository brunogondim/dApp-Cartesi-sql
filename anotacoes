https://github.com/cartesi/rollups-examples/tree/main/echo
sobre makefile: https://www.embarcados.com.br/introducao-ao-makefile/

substituir as tecnologias utilizadas no arquivo "requirements.txt"

"
cd echo/rollups-examples/echo/server/
python3 -m venv .env
. .env/bin/activate
pip install -r requirements.txt
"
*é necessario configurar o arquivo ".vscode" para debug no vscode. os arquivos ".env" e ".vscode" precisam estar na mesma pasta.

$ django-admin startproject testSQL
$ cd testSQL
$ python3 manage.py runserver
*ctrl + C (para parar o servidor. o comando anterior foi para iniciar o servidor e testar a instalação e projeto)
*para rodar na porta que se espera receber as requisições(http://0.0.0.0:5003), usar o comando $ python3 manage.py runserver 0:5003
$ python manage.py startapp appSQL
*na pasta testSQL, altera-se o arquivo "settings" para acrescentar 'appSQL.apps.AppsqlConfig' no INSTALLED_APPS
*na pasta testSQL, altera-se o arquivo "settings" para acrescentar '0.0.0.0' no ALLOWED_HOSTS
*na pasta testSQL, altera-se o arquivo "urls" para acrescentar "from django.urls import include" e path('appSQL/', include('appSQL.urls')) na "urlpatterns"
*na pasta appSQL, altera-se o arquivo "models" para criar o esquema de banco de dados
*na pasta appSQL, cria-se o arquivo "urls".

$ python3 manage.py makemigrations
$ python3 manage.py migrate
$ python3 manage.py createsuperuser
*sao criados login e senha para acesso inicial ao espaço <dominio>/admin

*a partir deste ponto, o app django esta escutando na mesma porta do que o echo estava. testa-se o comando "docker exec echo_hardhat_1 npx hardhat --network localhost echo:addInput --input "0x636172746573690D0A""
*a resposta é positiva: "Added input '0x636172746573690D0A' to epoch '1' (timestamp: 1644200276, signer: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266, tx: 0xb048a1c54a4036cbd86ec5d378b09aa1a114c5c1271233fb9e2a4a04068345b0)"
*ENTRETANDO, NENHUM INPUT FOI REALIZADO NA APLICAÇÃO. ocorreu o erro:
"
Invalid HTTP_HOST header: 'host.docker.internal:5003'. You may need to add 'host.docker.internal' to ALLOWED_HOSTS.
Bad Request: /advance
[07/Feb/2022 02:17:57] "POST /advance HTTP/1.1" 400 70385
"
* apos a correção do ALLOWED_HOSTS, o servidor parou de responder. suspeita-se que, apos o erro, o conteiner echo_hardhat_1 parou de enviar requisições. assim, procedeu-se com o reinicio dos conteiners($ docker-compose -f docker-compose-host.yml down -v) na pasta echo
* a suspeita se confirmou. apos o erro, o echo_hardhat_1 para de enviar requisições, e é necessário reiniciar os containers ($ docker-compose -f docker-compose-host.yml up --build)
* apenas o erro de endereço 400 ainda não foi corrigido. é necessario criá-lo no django. entretando, o erro passa a ser 404:
"
Not Found: /advance
[07/Feb/2022 03:30:18] "POST /advance HTTP/1.1" 404 1996
"
* este erro também faz com que o echo_hardhat_1 pare de requisitar. é necessario reiniciar os containers a cada erro.
* para criar as funcionalidades de "advance", altera-se os arquivos "views" e "urls" na pasta appSQL.
* é necessário remover(comentar) o midleeware 'django.middleware.csrf.CsrfViewMiddleware' no arquivo settings. caso contrario surge erro:
"
Forbidden (CSRF cookie not set.): /advance
[07/Feb/2022 07:22:07] "POST /advance HTTP/1.1" 403 2870
"
* conteudo do input estará na variavel "request" na respectiva classe no arquivo "views" 
* para tratar os requests será usado o django-rest-framework. no arquivo requirements, deve inserir: djangorestframework == 3.13 markdown == 3.3 django-filter == 21.1
* no arquivo settings, em INSTALED_APPS, inserir: 'rest_framework',
* no arquivo settings, inserir:
"
REST_FRAMEWORK = {
    # Use Django's standard `django.contrib.auth` permissions,
    # or allow read-only access for unauthenticated users.
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.DjangoModelPermissionsOrAnonReadOnly'
    ]
}
"
* no arquivo urls principal, deve-se incluir: path('api-auth/', include('rest_framework.urls')),








"
HTTP_DISPATCHER_URL="http://127.0.0.1:5004" gunicorn --preload --workers 1 --bind 0.0.0.0:5003 echo:app
"











state_server_1        | Got a request from Some(172.22.0.7:54954), initial state: ["0x0","0xa513e6e4b8f2a923d98304ec87f64353c4d5c853"]
hardhat_1             | eth_getBlockByNumber (11)
server_manager_1      | [2022-02-14T20:49:27Z INFO  host_server_manager::grpc::server_manager] received get_version
server_manager_1      | [2022-02-14T20:49:27Z INFO  host_server_manager::grpc::server_manager] received get_status
server_manager_1      | [2022-02-14T20:49:29Z INFO  host_server_manager::grpc::server_manager] received get_session_status with id=default_rollups_id
server_manager_1      | [2022-02-14T20:49:29Z INFO  host_server_manager::grpc::server_manager] received get_epoch_status with id=default_rollups_id and epoch_index=0
state_server_1        | Got a request from Some(172.22.0.7:54954), initial state: ["0x0","0xa513e6e4b8f2a923d98304ec87f64353c4d5c853"]
hardhat_1             | eth_getBlockByNumber (12)
server_manager_1      | [2022-02-14T20:49:37Z INFO  host_server_manager::grpc::server_manager] received get_version
server_manager_1      | [2022-02-14T20:49:37Z INFO  host_server_manager::grpc::server_manager] received get_status
hardhat_1             | web3_clientVersion
hardhat_1             | eth_chainId
hardhat_1             | eth_accounts
hardhat_1             | eth_chainId
hardhat_1             | eth_chainId (2)
hardhat_1             | eth_call
hardhat_1             |   Contract call:       <UnrecognizedContract>
hardhat_1             |   From:                0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266
hardhat_1             |   To:                  0xa513e6e4b8f2a923d98304ec87f64353c4d5c853
hardhat_1             | 
hardhat_1             | eth_chainId
hardhat_1             | eth_call
hardhat_1             |   Contract call:       <UnrecognizedContract>
hardhat_1             |   From:                0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266
hardhat_1             |   To:                  0xa513e6e4b8f2a923d98304ec87f64353c4d5c853
hardhat_1             | 
hardhat_1             | eth_blockNumber
hardhat_1             | eth_chainId
hardhat_1             | eth_chainId (2)
rollups_dispatcher_1  | 2022-02-14T20:49:38.957187Z  INFO main_loop: offchain::logic::rollups_logic: Dispatcher received new block `Block {
rollups_dispatcher_1  |     hash: 0x6f731fba8c12de22d04f54d0fbdffcb8ddcaada0f691f30f868829800b66d934,
rollups_dispatcher_1  |     number: 16,
rollups_dispatcher_1  |     parent_hash: 0x4b0f29c69de6774ee38c3c9ae909142a7b50581d0a1c3b6c7ebb795ae11c38e4,
rollups_dispatcher_1  |     timestamp: 1644871758,
rollups_dispatcher_1  |     logs_bloom: 0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
rollups_dispatcher_1  | }`
rollups_dispatcher_1  | 2022-02-14T20:49:38.957300Z  INFO main_loop: offchain::logic::rollups_logic: Querying state-fold server latest state
state_server_1        | Got a request from Some(172.22.0.5:50428), initial state: ["0x0","0xa513e6e4b8f2a923d98304ec87f64353c4d5c853"]
hardhat_1             | eth_estimateGas
rollups_dispatcher_1  | 2022-02-14T20:49:39.440630Z  INFO main_loop: offchain::logic::rollups_logic: Reacting on state `RollupsState {
rollups_dispatcher_1  |     constants: ImmutableState {
rollups_dispatcher_1  |         input_duration: 86400,
rollups_dispatcher_1  |         challenge_period: 604800,
rollups_dispatcher_1  |         contract_creation_timestamp: 1644345841,
rollups_dispatcher_1  |         input_contract_address: 0x9bd03768a7dcc129555de410ff8e85528a4f88b5,
rollups_dispatcher_1  |         output_contract_address: 0x440c0fcdc317d69606eabc35c0f676d1a8251ee1,
rollups_dispatcher_1  |         validator_contract_address: 0x80e2e2367c5e9d070ae2d6d50bf0cdf6360a7151,
rollups_dispatcher_1  |         dispute_contract_address: 0x0433d874a28147db0b330c000fcc50c0f0baf425,
rollups_dispatcher_1  |         rollups_contract_address: 0xa513e6e4b8f2a923d98304ec87f64353c4d5c853,
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     initial_epoch: 0,
rollups_dispatcher_1  |     finalized_epochs: FinalizedEpochs {
rollups_dispatcher_1  |         finalized_epochs: [],
rollups_dispatcher_1  |         initial_epoch: 0,
rollups_dispatcher_1  |         rollups_contract_address: 0xa513e6e4b8f2a923d98304ec87f64353c4d5c853,
rollups_dispatcher_1  |         input_contract_address: 0x9bd03768a7dcc129555de410ff8e85528a4f88b5,
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     current_epoch: AccumulatingEpoch {
rollups_dispatcher_1  |         epoch_number: 1,
rollups_dispatcher_1  |         inputs: EpochInputState {
rollups_dispatcher_1  |             epoch_number: 1,
rollups_dispatcher_1  |             inputs: [
rollups_dispatcher_1  |                 Input {
rollups_dispatcher_1  |                     sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                     block_number: 15,
rollups_dispatcher_1  |                     timestamp: 1644811142,
rollups_dispatcher_1  |                     payload: [
rollups_dispatcher_1  |                         99,
rollups_dispatcher_1  |                         97,
rollups_dispatcher_1  |                         114,
rollups_dispatcher_1  |                         116,
rollups_dispatcher_1  |                         101,
rollups_dispatcher_1  |                         115,
rollups_dispatcher_1  |                         105,
rollups_dispatcher_1  |                         13,
rollups_dispatcher_1  |                         10,
rollups_dispatcher_1  |                     ],
rollups_dispatcher_1  |                 },
rollups_dispatcher_1  |             ],
rollups_dispatcher_1  |             input_contract_address: 0x9bd03768a7dcc129555de410ff8e85528a4f88b5,
rollups_dispatcher_1  |         },
rollups_dispatcher_1  |         rollups_contract_address: 0xa513e6e4b8f2a923d98304ec87f64353c4d5c853,
rollups_dispatcher_1  |         input_contract_address: 0x9bd03768a7dcc129555de410ff8e85528a4f88b5,
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     current_phase: EpochSealedAwaitingFirstClaim {
rollups_dispatcher_1  |         sealed_epoch: AccumulatingEpoch {
rollups_dispatcher_1  |             epoch_number: 0,
rollups_dispatcher_1  |             inputs: EpochInputState {
rollups_dispatcher_1  |                 epoch_number: 0,
rollups_dispatcher_1  |                 inputs: [
rollups_dispatcher_1  |                     Input {
rollups_dispatcher_1  |                         sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                         block_number: 11,
rollups_dispatcher_1  |                         timestamp: 1644345883,
rollups_dispatcher_1  |                         payload: [
rollups_dispatcher_1  |                             99,
rollups_dispatcher_1  |                             97,
rollups_dispatcher_1  |                             114,
rollups_dispatcher_1  |                             116,
rollups_dispatcher_1  |                             101,
rollups_dispatcher_1  |                             115,
rollups_dispatcher_1  |                             105,
rollups_dispatcher_1  |                             13,
rollups_dispatcher_1  |                             10,
rollups_dispatcher_1  |                         ],
rollups_dispatcher_1  |                     },
rollups_dispatcher_1  |                     Input {
rollups_dispatcher_1  |                         sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                         block_number: 12,
rollups_dispatcher_1  |                         timestamp: 1644345942,
hardhat_1             | eth_getBlockByNumber
hardhat_1             | eth_unsubscribe
hardhat_1             | eth_unsubscribe (2)
hardhat_1             | eth_unsubscribe (3)
hardhat_1             | eth_unsubscribe (4)
hardhat_1             | eth_unsubscribe (5)
hardhat_1             | eth_unsubscribe (6)
hardhat_1             | eth_unsubscribe (7)
hardhat_1             | eth_unsubscribe (8)
hardhat_1             | eth_unsubscribe (9)
hardhat_1             | eth_unsubscribe (10)
hardhat_1             | eth_unsubscribe (11)
server_manager_1      | [2022-02-14T20:49:39Z INFO  host_server_manager::grpc::server_manager] received get_session_status with id=default_rollups_id
server_manager_1      | [2022-02-14T20:49:39Z INFO  host_server_manager::grpc::server_manager] received get_epoch_status with id=default_rollups_id and epoch_index=0
server_manager_1      | [2022-02-14T20:49:39Z INFO  host_server_manager::grpc::server_manager] received advance_state with id=default_rollups_id
hardhat_1             | eth_unsubscribe (12)
hardhat_1             | eth_getBlockByNumber
rollups_dispatcher_1  |                         payload: [
rollups_dispatcher_1  |                             99,
rollups_dispatcher_1  |                             97,
rollups_dispatcher_1  |                             114,
rollups_dispatcher_1  |                             116,
rollups_dispatcher_1  |                             101,
rollups_dispatcher_1  |                             115,
rollups_dispatcher_1  |                             105,
rollups_dispatcher_1  |                             13,
rollups_dispatcher_1  |                             10,
rollups_dispatcher_1  |                         ],
rollups_dispatcher_1  |                     },
rollups_dispatcher_1  |                     Input {
rollups_dispatcher_1  |                         sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                         block_number: 13,
rollups_dispatcher_1  |                         timestamp: 1644346576,
rollups_dispatcher_1  |                         payload: [
rollups_dispatcher_1  |                             99,
rollups_dispatcher_1  |                             97,
rollups_dispatcher_1  |                             114,
rollups_dispatcher_1  |                             116,
rollups_dispatcher_1  |                             101,
rollups_dispatcher_1  |                             115,
rollups_dispatcher_1  |                             105,
rollups_dispatcher_1  |                             13,
rollups_dispatcher_1  |                             10,
rollups_dispatcher_1  |                         ],
rollups_dispatcher_1  |                     },
rollups_dispatcher_1  |                     Input {
rollups_dispatcher_1  |                         sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                         block_number: 14,
rollups_dispatcher_1  |                         timestamp: 1644347609,
rollups_dispatcher_1  |                         payload: [
rollups_dispatcher_1  |                             99,
rollups_dispatcher_1  |                             97,
rollups_dispatcher_1  |                             114,
rollups_dispatcher_1  |                             116,
rollups_dispatcher_1  |                             101,
rollups_dispatcher_1  |                             115,
rollups_dispatcher_1  |                             105,
rollups_dispatcher_1  |                             13,
rollups_dispatcher_1  |                             10,
rollups_dispatcher_1  |                         ],
rollups_dispatcher_1  |                     },
hardhat_1             | eth_feeHistory
rollups_dispatcher_1  |                 ],
rollups_dispatcher_1  |                 input_contract_address: 0x9bd03768a7dcc129555de410ff8e85528a4f88b5,
rollups_dispatcher_1  |             },
rollups_dispatcher_1  |             rollups_contract_address: 0xa513e6e4b8f2a923d98304ec87f64353c4d5c853,
rollups_dispatcher_1  |             input_contract_address: 0x9bd03768a7dcc129555de410ff8e85528a4f88b5,
rollups_dispatcher_1  |         },
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     output_state: OutputState {
rollups_dispatcher_1  |         output_address: 0x440c0fcdc317d69606eabc35c0f676d1a8251ee1,
rollups_dispatcher_1  |         vouchers: {},
rollups_dispatcher_1  |     },
rollups_dispatcher_1  | }`
rollups_dispatcher_1  | 2022-02-14T20:49:39.441714Z  INFO main_loop:react: offchain::logic::rollups_logic: Querying machine manager for current epoch status
rollups_dispatcher_1  | 2022-02-14T20:49:39.447880Z  INFO main_loop:react: offchain::logic::rollups_logic: Current epoch status: EpochStatus {
rollups_dispatcher_1  |     epoch_number: 0,
rollups_dispatcher_1  |     processed_input_count: 0,
rollups_dispatcher_1  |     pending_input_count: 1,
rollups_dispatcher_1  |     is_active: true,
rollups_dispatcher_1  | }
rollups_dispatcher_1  | 2022-02-14T20:49:39.447903Z  INFO main_loop:react:enqueue_inputs_of_finalized_epochs: offchain::logic::rollups_logic: Machine manager epoch number `0` ahead of finalized_epochs `0`
rollups_dispatcher_1  | 2022-02-14T20:49:39.447919Z  INFO main_loop:react: offchain::logic::rollups_logic: EpochSealedAwaitingFirstClaim phase
rollups_dispatcher_1  | 2022-02-14T20:49:39.447928Z  INFO main_loop:react: offchain::logic::rollups_logic: Sealed epoch: AccumulatingEpoch {
rollups_dispatcher_1  |     epoch_number: 0,
rollups_dispatcher_1  |     inputs: EpochInputState {
rollups_dispatcher_1  |         epoch_number: 0,
rollups_dispatcher_1  |         inputs: [
rollups_dispatcher_1  |             Input {
rollups_dispatcher_1  |                 sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                 block_number: 11,
rollups_dispatcher_1  |                 timestamp: 1644345883,
rollups_dispatcher_1  |                 payload: [
rollups_dispatcher_1  |                     99,
rollups_dispatcher_1  |                     97,
rollups_dispatcher_1  |                     114,
rollups_dispatcher_1  |                     116,
rollups_dispatcher_1  |                     101,
rollups_dispatcher_1  |                     115,
rollups_dispatcher_1  |                     105,
rollups_dispatcher_1  |                     13,
rollups_dispatcher_1  |                     10,
rollups_dispatcher_1  |                 ],
rollups_dispatcher_1  |             },
rollups_dispatcher_1  |             Input {
rollups_dispatcher_1  |                 sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                 block_number: 12,
rollups_dispatcher_1  |                 timestamp: 1644345942,
rollups_dispatcher_1  |                 payload: [
rollups_dispatcher_1  |                     99,
rollups_dispatcher_1  |                     97,
rollups_dispatcher_1  |                     114,
rollups_dispatcher_1  |                     116,
rollups_dispatcher_1  |                     101,
rollups_dispatcher_1  |                     115,
rollups_dispatcher_1  |                     105,
rollups_dispatcher_1  |                     13,
rollups_dispatcher_1  |                     10,
rollups_dispatcher_1  |                 ],
rollups_dispatcher_1  |             },
rollups_dispatcher_1  |             Input {
rollups_dispatcher_1  |                 sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                 block_number: 13,
rollups_dispatcher_1  |                 timestamp: 1644346576,
rollups_dispatcher_1  |                 payload: [
rollups_dispatcher_1  |                     99,
rollups_dispatcher_1  |                     97,
rollups_dispatcher_1  |                     114,
rollups_dispatcher_1  |                     116,
rollups_dispatcher_1  |                     101,
rollups_dispatcher_1  |                     115,
rollups_dispatcher_1  |                     105,
rollups_dispatcher_1  |                     13,
rollups_dispatcher_1  |                     10,
rollups_dispatcher_1  |                 ],
rollups_dispatcher_1  |             },
rollups_dispatcher_1  |             Input {
rollups_dispatcher_1  |                 sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                 block_number: 14,
rollups_dispatcher_1  |                 timestamp: 1644347609,
rollups_dispatcher_1  |                 payload: [
rollups_dispatcher_1  |                     99,
rollups_dispatcher_1  |                     97,
rollups_dispatcher_1  |                     114,
rollups_dispatcher_1  |                     116,
rollups_dispatcher_1  |                     101,
rollups_dispatcher_1  |                     115,
rollups_dispatcher_1  |                     105,
rollups_dispatcher_1  |                     13,
rollups_dispatcher_1  |                     10,
rollups_dispatcher_1  |                 ],
rollups_dispatcher_1  |             },
rollups_dispatcher_1  |         ],
rollups_dispatcher_1  |         input_contract_address: 0x9bd03768a7dcc129555de410ff8e85528a4f88b5,
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     rollups_contract_address: 0xa513e6e4b8f2a923d98304ec87f64353c4d5c853,
rollups_dispatcher_1  |     input_contract_address: 0x9bd03768a7dcc129555de410ff8e85528a4f88b5,
rollups_dispatcher_1  | }
rollups_dispatcher_1  | 2022-02-14T20:49:39.448067Z  INFO main_loop:react: offchain::logic::rollups_logic: Machine manager is on sealed epoch
rollups_dispatcher_1  | 2022-02-14T20:49:39.448081Z  INFO main_loop:react:update_sealed_epoch:enqueue_remaning_inputs: offchain::logic::rollups_logic: Number of inputs in machine manager: 1
rollups_dispatcher_1  | 2022-02-14T20:49:39.448105Z  INFO main_loop:react:update_sealed_epoch:enqueue_remaning_inputs: offchain::logic::rollups_logic: Machine manager enqueueing inputs from `1` to `4`
rollups_dispatcher_1  | Error: TonicStatusError { source: Status { code: DataLoss, message: "session is tainted", metadata: MetadataMap { headers: {"content-type": "application/grpc", "date": "Mon, 14 Feb 2022 20:49:39 GMT"} }, source: None } }
hardhat_1             | eth_sendTransaction
hardhat_1             |   Contract call:       <UnrecognizedContract>
hardhat_1             |   Transaction:         0x0e1b78126e453dffcf7f51bb453b0bcfde5e244a905c0d48fab9024fcc40a9e4
hardhat_1             |   From:                0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266
hardhat_1             |   To:                  0x9bd03768a7dcc129555de410ff8e85528a4f88b5
hardhat_1             |   Value:               0 ETH
hardhat_1             |   Gas used:            73251 of 73251
hardhat_1             |   Block #16:           0xb15a40d6f634433ad89b8fab5ff954bb94a710b1f818ebf7b392e542374b5458
hardhat_1             | 
hardhat_1             | eth_chainId
server_manager_1      | [2022-02-14T20:49:39Z INFO  host_server_manager::grpc::server_manager] received get_session_status with id=default_rollups_id
server_manager_1      | [2022-02-14T20:49:39Z INFO  host_server_manager::grpc::server_manager] received get_epoch_status with id=default_rollups_id and epoch_index=0
hardhat_1             | eth_getTransactionByHash
hardhat_1             | eth_chainId
hardhat_1             | eth_getTransactionReceipt
echo_rollups_dispatcher_1 exited with code 1
rollups_dispatcher_1  | 2022/02/14 20:49:43 File file:///opt/cartesi/share/blockchain/dapp.json had been generated
rollups_dispatcher_1  | 2022/02/14 20:49:43 Waiting for: tcp://state_server:50051
rollups_dispatcher_1  | 2022/02/14 20:49:43 Waiting for: tcp://server_manager:5001
rollups_dispatcher_1  | 2022/02/14 20:49:43 Connected to tcp://state_server:50051
rollups_dispatcher_1  | 2022/02/14 20:49:43 Connected to tcp://server_manager:5001
rollups_dispatcher_1  | 2022-02-14T20:49:43.785070Z  INFO offchain_main: Starting rollups dispatcher with config `ApplicationConfig {
rollups_dispatcher_1  |     basic_config: Config {
rollups_dispatcher_1  |         contracts: {},
rollups_dispatcher_1  |         url: "http://localhost:8545",
rollups_dispatcher_1  |         ws_url: None,
rollups_dispatcher_1  |         wallet: Some(
rollups_dispatcher_1  |             Wallet {
rollups_dispatcher_1  |                 address: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266,
rollups_dispatcher_1  |                 chain_Id: 1,
rollups_dispatcher_1  |             },
rollups_dispatcher_1  |         ),
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     logic_config: LogicConfig {
rollups_dispatcher_1  |         mnemonic: "test test test test test test test test test test test junk",
rollups_dispatcher_1  |         chain_id: 31337,
rollups_dispatcher_1  |         rollups_contract_address: 0xa513e6e4b8f2a923d98304ec87f64353c4d5c853,
rollups_dispatcher_1  |         initial_epoch: 0,
rollups_dispatcher_1  |         provider_http_endpoint: "http://hardhat:8545",
rollups_dispatcher_1  |         ws_endpoint: "ws://hardhat:8545",
rollups_dispatcher_1  |         state_fold_grpc_endpoint: "http://state_server:50051",
rollups_dispatcher_1  |         mm_endpoint: "http://server_manager:5001",
rollups_dispatcher_1  |         session_id: "default_rollups_id",
rollups_dispatcher_1  |         gas_multiplier: Some(
rollups_dispatcher_1  |             1.0,
rollups_dispatcher_1  |         ),
rollups_dispatcher_1  |         gas_price_multiplier: Some(
rollups_dispatcher_1  |             1.0,
rollups_dispatcher_1  |         ),
rollups_dispatcher_1  |         rate: 20,
rollups_dispatcher_1  |         confirmations: 10,
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     sf_config: SFConfig {
rollups_dispatcher_1  |         concurrent_events_fetch: 16,
rollups_dispatcher_1  |         genesis_block: 1,
rollups_dispatcher_1  |         query_limit_error_codes: [
rollups_dispatcher_1  |             -32005,
rollups_dispatcher_1  |         ],
rollups_dispatcher_1  |         safety_margin: 1,
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     bs_config: BSConfig {
rollups_dispatcher_1  |         max_delay: 64s,
rollups_dispatcher_1  |         max_retries: 5,
rollups_dispatcher_1  |         subscriber_timeout: 120s,
rollups_dispatcher_1  |     },
rollups_dispatcher_1  |     tm_config: TMConfig {
rollups_dispatcher_1  |         max_delay: 64s,
rollups_dispatcher_1  |         max_retries: 5,
rollups_dispatcher_1  |         transaction_timeout: 5s,
rollups_dispatcher_1  |     },
rollups_dispatcher_1  | }`
rollups_dispatcher_1  | 2022-02-14T20:49:43.787520Z  INFO main_loop: offchain::logic::rollups_logic: Creating block subscriber with endpoint `ws://hardhat:8545`
hardhat_1             | eth_subscribe
rollups_dispatcher_1  | 2022-02-14T20:49:43.796479Z  INFO main_loop: offchain::logic::rollups_logic: Creating transaction manager with endpoint `http://hardhat:8545`
rollups_dispatcher_1  | 2022-02-14T20:49:43.907394Z  INFO main_loop: offchain::logic::rollups_logic: Dispatcher running with validator address `0xf39f…2266`
rollups_dispatcher_1  | 2022-02-14T20:49:43.916042Z  INFO main_loop: offchain::logic::rollups_logic: Instantiating rollups contract at address `0xa513…c853`
rollups_dispatcher_1  | 2022-02-14T20:49:43.916319Z  INFO main_loop: offchain::logic::rollups_logic: Creating state-fold server gRPC connection at endpoint `http://state_server:50051`
server_manager_1      | [2022-02-14T20:49:43Z INFO  host_server_manager::grpc::server_manager] received get_status
rollups_dispatcher_1  | 2022-02-14T20:49:43.920639Z  INFO main_loop: offchain::logic::rollups_logic: Creating rollup machine manager gRPC connection at endpoint `http://server_manager:5001` with session id `default_rollups_id`
rollups_dispatcher_1  | 2022-02-14T20:49:43.923897Z  INFO main_loop: offchain::logic::rollups_logic: Starting block-subscriber subscription
rollups_dispatcher_1  | 2022-02-14T20:49:43.923915Z  INFO main_loop: offchain::logic::rollups_logic: Entering main loop...
rollups_dispatcher_1  | 2022-02-14T20:49:43.923924Z  INFO main_loop: offchain::logic::rollups_logic: Awaiting new blocks...
state_server_1        | Got a request from Some(172.22.0.7:54954), initial state: ["0x0","0xa513e6e4b8f2a923d98304ec87f64353c4d5c853"]
hardhat_1             | eth_getBlockByNumber
hardhat_1             | eth_getBlockByHash
hardhat_1             | eth_getBlockByHash (2)
hardhat_1             | eth_getBlockByNumber
hardhat_1             | eth_getBlockByHash
hardhat_1             | eth_getBlockByHash (2)
hardhat_1             | eth_getBlockByNumber
hardhat_1             | eth_getBlockByHash
hardhat_1             | eth_getBlockByHash (2)
hardhat_1             | eth_getBlockByNumber
hardhat_1             | eth_getBlockByHash
hardhat_1             | eth_getBlockByHash (2)
hardhat_1             | eth_getLogs
hardhat_1             | eth_getBlockByNumber
hardhat_1             | eth_getBlockByHash
hardhat_1             | eth_getBlockByHash (2)
hardhat_1             | eth_getBlockByNumber
hardhat_1             | eth_getBlockByHash
hardhat_1             | eth_getBlockByHash (2)
server_manager_1      | [2022-02-14T20:49:47Z INFO  host_server_manager::grpc::server_manager] received get_version
server_manager_1      | [2022-02-14T20:49:47Z INFO  host_server_manager::grpc::server_manager] received get_status
server_manager_1      | [2022-02-14T20:49:49Z INFO  host_server_manager::grpc::server_manager] received get_session_status with id=default_rollups_id
server_manager_1      | [2022-02-14T20:49:49Z INFO  host_server_manager::grpc::server_manager] received get_epoch_status with id=default_rollups_id and epoch_index=0
state_server_1        | Got a request from Some(172.22.0.7:54954), initial state: ["0x0","0xa513e6e4b8f2a923d98304ec87f64353c4d5c853"]
hardhat_1             | eth_getBlockByNumber
server_manager_1      | [2022-02-14T20:49:57Z INFO  host_server_manager::grpc::server_manager] received get_version
server_manager_1      | [2022-02-14T20:49:57Z INFO  host_server_manager::grpc::server_manager] received get_status
server_manager_1      | [2022-02-14T20:49:59Z INFO  host_server_manager::grpc::server_manager] received get_session_status with id=default_rollups_id
server_manager_1      | [2022-02-14T20:49:59Z INFO  host_server_manager::grpc::server_manager] received get_epoch_status with id=default_rollups_id and epoch_index=0